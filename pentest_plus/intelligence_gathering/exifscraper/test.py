import pytest
from utils import validate_and_clean_urls

# Test cases for the URL validation function
url_tests = [
    (
        ["http://test.com", "not a valid url"],
        {"valid": ["http://test.com"], "discarded": ["not a valid url"]},
    ),
    (
        ["https://www.google.com", "http://yahoo.co.uk"],
        {"valid": ["https://www.google.com", "http://yahoo.co.uk"], "discarded": []},
    ),
    ([], {"valid": [], "discarded": []}),
    (
        ["  http://spaced.com  "],
        {"valid": ["http://spaced.com"], "discarded": []},
    ),
    (
        ["no-scheme.com"],
        {"valid": ["https://no-scheme.com"], "discarded": []},
    ),
]

@pytest.mark.parametrize("url_list, expected_output", url_tests)
def test_validate_and_clean_urls_scenarios(url_list, expected_output):
    """Tests various scenarios for URL validation and cleaning."""
    assert validate_and_clean_urls(url_list) == expected_output

def test_validate_and_clean_urls_raises_type_error_for_wrong_list_item_type():
    """
    Tests that a TypeError is raised with a specific message if a list 
    contains non-string items.
    """
    with pytest.raises(TypeError) as excinfo:
        validate_and_clean_urls(["http://good.com", b"http://bytes.com"])

    assert "should be provided as strings" in str(excinfo.value)
